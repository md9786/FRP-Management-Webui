<img width="1918" height="904" alt="image" src="https://github.com/md9786/FRP-Management-Webui/blob/main/screenshots/dash.png?raw=true" />
# ویکی رابط کاربری مدیریت FRP

به ویکی رسمی رابط کاربری مدیریت FRP خوش آمدید. این سند راهنمای جامعی برای تمام ویژگی‌ها و عملکردهای این برنامه ارائه می‌دهد.

## فهرست مطالب
1.  [بررسی کلی](#1-بررسی-کلی)
2.  [صفحه ورود](#2-صفحه-ورود)
3.  [داشبورد](#3-داشبورد)
4.  [تنظیمات و الگوها](#4-تنظیمات-و-الگوها)
    - [4.1 تنظیم کلاینت](#41-تنظیم-کلاینت)
    - [4.2 تنظیم سرور](#42-تنظیم-سرور)
    - [4.3 مدیریت الگوها](#43-مدیریت-الگوها)
    - [4.4 مدیریت سیستم](#44-مدیریت-سیستم)
5.  [مدیریت FRP](#5-مدیریت-frp)
    - [5.1 تب کلاینت‌ها](#51-تب-کلاینت‌ها)
    - [5.2 تب سرورها](#52-تب-سرورها)
    - [5.3 ویرایش پیکربندی](#53-ویرایش-پیکربندی)
6.  [مدیریت EFRP](#6-مدیریت-efrp)
7.  [نمایش وضعیت](#7-نمایش-وضعیت)
8.  [تنظیمات](#8-تنظیمات)
9.  [ساخت و اجرای برنامه](#9-ساخت-و-اجرای-برنامه)

---

## 1. بررسی کلی

رابط کاربری مدیریت FRP یک رابط گرافیکی مبتنی بر وب است که برای ساده‌سازی نصب، پیکربندی و مدیریت کلاینت‌ها و سرورهای FRP (پروکسی معکوس سریع) طراحی شده است. این برنامه نظارت بر سیستم در زمان واقعی، پخش زنده گزارش‌ها و یک سیستم الگوی بصری را برای ساده‌سازی تنظیمات تکراری ارائه می‌دهد.

---

## 2. صفحه ورود

این صفحه نقطه ورود به برنامه است. دسترسی با نام کاربری و رمز عبور محافظت می‌شود.

-   اطلاعات پیش‌فرض:
    -   نام کاربری: `admin`
    -   رمز عبور: `admin`
-   عملکرد: کاربران باید اطلاعات ورود خود را وارد کنند تا به داشبورد دسترسی پیدا کنند. پس از به‌روزرسانی اطلاعات در صفحه تنظیمات، کاربر به این صفحه هدایت می‌شود تا دوباره وارد شود.

![صفحه ورود](https://github.com/md9786/FRP-Management-Webui/blob/main/screenshots/login.png?raw=true "صفحه ورود برای رابط کاربری مدیریت FRP.")

---

## 3. داشبورد

داشبورد صفحه اصلی پس از ورود موفقیت‌آمیز است. این صفحه یک نمای کلی در زمان واقعی و سطح بالا از سیستم و اتصالات FRP ارائه می‌دهد.

![نمای داشبورد](https://github.com/md9786/FRP-Management-Webui/blob/main/screenshots/dash.png?raw=true "داشبورد اصلی با تمام ابزارک‌های نظارتی.")

### ابزارک‌ها

-   اطلاعات سیستم: یک نوار بالایی که چهار معیار کلیدی درباره دستگاه میزبان را نشان می‌دهد.
    -   استفاده از CPU: درصد بار فعلی CPU. رنگ از سبز (<50%)، به زرد (50-80%) و قرمز (>80%) بر اساس میزان استفاده تغییر می‌کند.
    -   استفاده از RAM: مقدار حافظه در حال استفاده در مقابل کل حافظه موجود. رنگ بر اساس درصد استفاده از RAM تغییر می‌کند (سبز <70%، زرد 70-90%، قرمز >90%).
    -   آپلود شبکه: سرعت فعلی ترافیک شبکه خروجی.
    -   دانلود شبکه: سرعت فعلی ترافیک شبکه ورودی.

-   نمای کلی اتصال: این کارت یک بررسی سریع از وضعیت تمام کلاینت‌ها و سرورهای FRP پیکربندی‌شده ارائه می‌دهد.
    -   نقاط وضعیت: هر ورودی دارای یک نقطه رنگی است که وضعیت فعلی آن را نشان می‌دهد، که با تحلیل گزارش‌های اخیر تعیین می‌شود:
        -   سبز: به درستی در حال اجرا.
        -   زرد: در حال اجرا، اما با هشدارهایی در گزارش‌ها.
        -   قرمز: خطایی رخ داده است.
        -   خاکستری: سرویس متوقف شده است.

-   تاریخچه شبکه: یک نمودار خطی که سرعت آپلود و دانلود شبکه (به کیلوبایت بر ثانیه) را در 5 دقیقه گذشته نمایش می‌دهد و هر 5 ثانیه به‌روزرسانی می‌شود.

---

## 4. تنظیمات و الگوها

این بخش مرکز کنترل برای ایجاد پیکربندی‌های جدید FRP و مدیریت الگوها (presets) است. این بخش به چهار تب سازمان‌دهی شده است.

![صفحه تنظیمات و الگوها](https://github.com/md9786/FRP-Management-Webui/blob/main/screenshots/setup.png?raw=true "صفحه اصلی تنظیمات با چهار تب اصلی.")

### 4.1 تنظیم کلاینت

این تب برای ایجاد یک پیکربندی جدید `frpc` (کلاینت) و سرویس سیستمی مرتبط با آن است.

-   بارگذاری الگو: یک الگوی کلاینت ذخیره‌شده را انتخاب کنید تا فیلدهای فرم به طور خودکار پر شوند.
-   نام کلاینت: یک نام منحصربه‌فرد و توصیفی برای کلاینت (مثلاً `my-game-server`). این نام برای فایل پیکربندی و سرویس استفاده می‌شود.
-   آی‌پی / پورت سرور: آدرس و پورت سرور `frps` که این کلاینت به آن متصل خواهد شد.
-   توکن احراز هویت: توکن احراز هویتی که باید با توکن سرور مطابقت داشته باشد.
-   حمل‌ونقل: پروتکل مورد استفاده برای اتصال (TCP، Websocket، QUIC، KCP).
-   فعال‌سازی TCP Mux: انتخاب کنید که آیا مالتی‌پلکسینگ جریان TCP روی یک اتصال واحد فعال شود یا خیر.
-   پورت‌های محلی: پورت‌های محلی روی دستگاه کلاینت که باید در معرض دید قرار گیرند. می‌توانید پورت‌های تکی، کاما و محدوده‌ها را مشخص کنید (مثلاً `22, 80, 443, 6000-6010`).
-   دکمه تنظیم کلاینت: فرم را ارسال می‌کند، فایل پیکربندی `.toml` را ایجاد می‌کند و سرویس `frpc@<client-name>.service` را فعال و شروع می‌کند.

### 4.2 تنظیم سرور

این تب برای ایجاد یک پیکربندی جدید `frps` (سرور) و سرویس سیستمی مرتبط با آن است.

-   بارگذاری الگو: یک الگوی سرور ذخیره‌شده را انتخاب کنید تا فرم به طور خودکار پر شود.
-   نام سرور: یک نام منحصربه‌فرد و توصیفی برای سرور (مثلاً `public-vps-1`).
-   پورت اتصال: پورت اصلی که سرور FRP برای اتصال کلاینت‌ها روی آن گوش می‌دهد.
-   پروتکل: پروتکل‌های اضافی برای فعال‌سازی (QUIC، KCP).
-   فعال‌سازی TCP Mux: انتخاب کنید که آیا مالتی‌پلکسینگ جریان TCP فعال شود یا خیر.
-   توکن احراز هویت: توکنی که کلاینت‌ها باید برای اتصال استفاده کنند.
-   دکمه تنظیم سرور: فرم را ارسال می‌کند، فایل پیکربندی را ایجاد می‌کند و سرویس `frps@<server-name>.service` را شروع می‌کند.

### 4.3 مدیریت الگوها

این تب به شما امکان می‌دهد تا الگوهای قابل استفاده مجدد برای تنظیمات کلاینت و سرور ایجاد و حذف کنید تا پیکربندی سریع‌تر انجام شود.

-   تب‌های الگوهای کلاینت / سرور: بین مدیریت الگوهای کلاینت یا سرور جابجا شوید.
-   فرم ایجاد الگوی جدید: جزئیات یک الگوی جدید را پر کنید و روی "ذخیره" کلیک کنید. الگو در لیست "الگوهای موجود" و منوی کشویی "بارگذاری الگو" در فرم‌های تنظیم ظاهر خواهد شد.
-   لیست الگوهای موجود: تمام الگوهای ذخیره‌شده را نشان می‌دهد. هر مورد دارای یک دکمه **حذف** است.

### 4.4 مدیریت سیستم

این تب اقدامات سطح بالایی را برای نصب خود FRP ارائه می‌دهد.

-   نصب/به‌روزرسانی FRP: آخرین نسخه FRP را از GitHub دانلود می‌کند، فایل‌های باینری (`frps`، `frpc`) را نصب می‌کند و فایل‌های قالب سرویس systemd مورد نیاز را تنظیم می‌کند. از این برای نصب اولیه یا ارتقا استفاده کنید.
-   حذف FRP: (هشدار: غیرقابل بازگشت) این اقدام تمام سرویس‌ها را متوقف می‌کند، تمام فایل‌های پیکربندی را حذف می‌کند، فایل‌های باینری را حذف می‌کند و فایل‌های systemd را حذف می‌کند. این کار FRP را به طور کامل از سیستم پاک می‌کند. قبل از ادامه، یک اعلان تأیید ظاهر خواهد شد.

---

## 5. مدیریت FRP

این صفحه برای مدیریت روزمره سرویس‌های در حال اجرای FRP است.

![صفحه مدیریت FRP](https://github.com/md9786/FRP-Management-Webui/blob/main/screenshots/manage.png?raw=true "رابط اصلی مدیریت برای کلاینت‌ها و سرورها.")

### 5.1 تب کلاینت‌ها

-   کنترل‌های جهانی: دکمه‌های **شروع همه**، **توقف همه** و **راه‌اندازی مجدد همه** اقدام مربوطه را به طور همزمان روی تمام کلاینت‌های پیکربندی‌شده انجام می‌دهند.
-   تب‌های کلاینت: هر کلاینت پیکربندی‌شده تب خاص خود را برای مدیریت جداگانه دارد.
-   کنترل‌های جداگانه: در هر تب، می‌توانید برای کلاینت خاص **شروع**، **توقف**، **راه‌اندازی مجدد** یا **ویرایش پیکربندی** را انجام دهید.
-   گزارش‌های زنده: یک نمایشگر گزارش در زمان واقعی برای سرویس کلاینت انتخاب‌شده.
    -   نوار جستجو: فوراً گزارش‌ها را برای کلمات کلیدی خاص فیلتر کنید.
    -   فیلترهای سطح: گزارش‌ها را بر اساس شدت فیلتر کنید: **اطلاعات**، **هشدار** یا **خطا**.

### 5.2 تب سرورها

این تب عملکرد تب کلاینت‌ها را منعکس می‌کند اما به نمونه‌های سرور `frps` اختصاص دارد. شامل همان کنترل‌های جهانی، کنترل‌های جداگانه و نمایشگر گزارش زنده است.

### 5.3 ویرایش پیکربندی

کلیک روی دکمه **ویرایش پیکربندی** در هر تب کلاینت یا سرور شما را به این صفحه می‌برد.

-   نام پیکربندی: می‌توانید نام پیکربندی را در اینجا تغییر دهید. این کار به طور خودکار سرویس قدیمی را متوقف می‌کند، فایل پیکربندی را تغییر نام می‌دهد و سرویس جدیدی با نام جدید شروع می‌کند.
-   محتوای پیکربندی: یک ناحیه متنی که شامل کل فایل پیکربندی `.toml` است. می‌توانید در اینجا ویرایش‌های دستی انجام دهید.
-   ذخیره: تغییرات را در فایل ذخیره می‌کند و سرویس را برای اعمال آنها راه‌اندازی مجدد می‌کند.

---

## 6. مدیریت EFRP

این صفحه یک رابط مدیریت ساده‌شده برای سرویس EFRP ارائه می‌دهد.

-   کنترل‌ها: دکمه‌های **شروع** و **توقف** برای مدیریت سرویس EFRP.
-   گزارش‌های زنده: یک نمایشگر گزارش در زمان واقعی برای سرویس EFRP، کامل با جستجو و فیلتر سطح.

![صفحه مدیریت EFRP](https://github.com/md9786/FRP-Management-Webui/blob/main/screenshots/EFRP.png?raw=true "رابط مدیریت برای سرویس EFRP.")

---

## 7. نمایش وضعیت

این صفحه یک خلاصه متنی خام از کل تنظیمات FRP ارائه می‌دهد که برای اشکال‌زدایی سریع یا کپی اطلاعات مفید است.

-   نسخه: نسخه FRP نصب‌شده فعلی.
-   سرویس‌های در حال اجرا: لیستی از تمام سرویس‌های `frpc` و `frps` که در حال حاضر فعال هستند.
-   سرویس‌های فعال‌شده: لیستی از تمام سرویس‌های `frpc` و `frps` که برای شروع در بوت فعال شده‌اند.
-   پیکربندی‌های سرور/کلاینت: فهرستی از تمام فایل‌های `.toml` در پوشه‌های پیکربندی سرور و کلاینت.

![صفحه نمایش وضعیت](https://github.com/md9786/FRP-Management-Webui/blob/main/screenshots/status.png?raw=true "صفحه نمای کلی وضعیت مبتنی بر متن.")

---

## 8. تنظیمات

این صفحه به شما امکان می‌دهد اطلاعات ورود برای دسترسی به رابط وب را مدیریت کنید.

-   نام کاربری: تغییر نام کاربری ورود.
-   رمز عبور فعلی: برای انجام هرگونه تغییر باید ارائه شود.
-   رمز عبور جدید / تأیید رمز عبور جدید: رمز عبور جدید را در اینجا وارد کنید. برای حفظ رمز فعلی خالی بگذارید.
-   ذخیره تغییرات: پس از ذخیره، شما از سیستم خارج شده و به صفحه ورود هدایت می‌شوید تا با اطلاعات جدید وارد شوید.

**جایگاه اسکرین‌شات:**
![صفحه تنظیمات](https://github.com/md9786/FRP-Management-Webui/blob/main/screenshots/settings.png?raw=true "فرم تنظیمات کاربر و تغییر رمز عبور.")

---

## 9. ساخت و اجرای برنامه

این بخش دستورالعمل‌هایی را برای کامپایل کردن بک‌اند Go و اجرای کل برنامه از کد منبع ارائه می‌دهد.

### پیش‌نیازها

-   Go: باید زبان برنامه‌نویسی Go (نسخه 1.18 یا جدیدتر) روی سیستم شما نصب شده باشد. می‌توانید آن را از [وب‌سایت رسمی Go](https://go.dev/dl/) دانلود کنید.

### 1. ساختار فایل‌ها

قبل از ساخت، مطمئن شوید که فایل‌های پروژه شما به درستی سازمان‌دهی شده‌اند. برنامه به یک ساختار دایرکتوری خاص برای قالب‌های HTML نیاز دارد.

```
/your-project-root
├── main.go         
└── /templates/
    ├── edit.html
    ├── efrp.html
    ├── home.html
    ├── login.html
    ├── logs.html
    ├── manage-frp.html
    ├── settings.html
    ├── setup-frp.html
    ├── sidebar.html
    └── status.html
```


-   یک دایرکتوری به نام `templates` ایجاد کنید.
-   تمام فایل‌های `.html` را به دایرکتوری `templates` منتقل کنید.

### 2. مقداردهی اولیه ماژول Go

به دایرکتوری ریشه پروژه خود در ترمینال بروید و یک ماژول Go را مقداردهی اولیه کنید. این کار فایل `go.mod` را برای مدیریت وابستگی‌ها ایجاد می‌کند.

```bash
# 'my-frp-manager' را با نام ماژول مورد نظر خود جایگزین کنید
go mod init my-frp-manager
```

### 3. دریافت وابستگی‌ها

پس از مقداردهی اولیه ماژول، دستور `go mod tidy` را اجرا کنید. این دستور تمام بسته‌های خارجی مورد نیاز (مانند Gin، gopsutil و غیره) را پیدا کرده و دانلود می‌کند.

```bash
go mod tidy
```

### 4. ساخت برنامه

اکنون، کد منبع Go را به یک فایل اجرایی باینری واحد کامپایل کنید.

-   برای لینوکس/مک‌او‌اس:
    ```bash
    go build -o frp-manager
    ```
-   برای ویندوز:
    ```bash
    go build -o frp-manager.exe
    ```
این دستور یک فایل اجرایی به نام `frp-manager` (یا `frp-manager.exe`) در ریشه پروژه شما ایجاد می‌کند.

### 5. اجرای برنامه

برای اجرای برنامه، فایل اجرایی‌ای که تازه ایجاد کردید را اجرا کنید. از آنجا که برنامه عملیات در سطح سیستم (مدیریت سرویس‌ها، نوشتن در `/root/`) انجام می‌دهد، معمولاً به دسترسی‌های مدیر/سوپریوزر نیاز دارد.

-   در لینوکس/مک‌او‌اس:
    ```bash
    sudo ./frp-manager
    ```
-   در ویندوز:
    یک Command Prompt یا PowerShell را **به عنوان مدیر** باز کنید و اجرا کنید:
    ```bash
    .\frp-manager.exe
    ```

پس از اجرای دستور، باید پیام "Server starting on :5001..." را در ترمینال خود ببینید. اکنون می‌توانید با رفتن به آدرس `http://server-ip:5001` در مرورگر وب خود به رابط کاربری وب دسترسی پیدا کنید.